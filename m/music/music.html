<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="Generator" content="EditPlus®">
		<meta name="Author" content="">
		<meta name="Keywords" content="">
		<meta name="Description" content="">
		<title>document</title>	
	
		<style type="text/css">
			*{margin:0;padding:0;}
			body{background:url("images/1.jpg");background-size: auto;background-repeat: no-repeat;}

			/*music start*/
			.music{width:322px;height:635px;/*background:#ffcc00;*/margin:30px auto;position:relative;box-shadow:5px 5px 19px #181818;}
			.music .m-top{height:42px;background:url("images/phone-top.jpg");}
			.music .m-info{height:20px;background:url("images/info.jpg");}
			.music .m-con{height:530px;background:url("images/2.jpg");background-size:cover;border-left:1px solid #fff;border-right:1px solid #fff;overflow:auto;}
			.music .m-con .lrc{line-height:30px;font-size:14px;color:palevioletred;padding-left:20px;font-family:"方正喵呜体";}
			.music .m-bottom{height:42px;background:url("images/phone-bottom.jpg");}

			.music .m-btn{width:40px;height:40px;display:block;position:absolute;background:url("images/3.jpg");top:90px;right:45px;border-radius:50%;}
			.music .m-con .sel{color:#00cc00;font-size:18px;}
			/*end music*/

			
			/*定义一个关键帧*/
			@-webkit-keyframes spin{
			from{transform:rotate(0deg);}
			to{transform:rotate(360deg);}
			}

			/*
			@-webkit-keyframes spin{
			from{ background: red;border-radius: 5px;}
			30%{ background:blue;border-radius: 20px;}
			60%{ background:green;border-radius: 10px;}
			to{ background: yellow;border-radius: 25px;}
			}*/


			/*调用关键帧*/
			.myRotate{
				-webkit-animation:spin 2s linear infinite;
			}

			
			/*手机端页面控制*/
			@media screen and (max-width:580px){
				.music{width:100%;margin:0;}
				.music .m-top,.music .m-info,.music .m-bottom{display:none;}
				.music .m-con{height:700px;border:none;}
			}


			/*滚动条样式*/
			::-webkit-scrollbar{width:5px;height:8px;background:#ccc;}
			::-webkit-scrollbar-button{background-color:#e5e5e5;}
			::-webkit-scrollbar-thumb{background:#4c4c4c;}

			
			/*滚动条样式*/
			/*
			::-webkit-scrollbar{width:5px;height:8px;background:#ccc;}
			::-webkit-scrollbar-button{background-color:#e5e5e5;}
			::-webkit-scrollbar-track{background:#999;}
			::-webkit-scrollbar-track-piece{background:#ccc;}
			::-webkit-scrollbar-thumb{background:#666;}
			::-webkit-scrollbar-corner{background:#82AFFF;}
			::-webkit-scrollbar-resizer{background:#FF0BEE;}
			scrollbar{-moz-appearance:none  !important;background:rgb(0,255,0)  !important;}
			scrollbarbutton{-moz-appearance:none  !important;background:rgb(0,0,255)  !important;}
			scrollbarbutton:hover{-moz-appearance:none  !important;background:rgb(255,0,0)  !important;}
			*/
		</style>


	</head>
<body>
	
	<!--music start-->
	<div class="music">
		<div class="m-top"></div>
		<div class="m-info"></div>
		<div class="m-con">
		
		</div>
		<div class="m-bottom"></div>
		<a href="#" class="m-btn"></a>
	</div>
	<!--end music-->

<div style="display:none">
<textarea id="lrc" >
[00:00.00]童话镇
[00:05.00]演唱：陈一发儿
[00:10.00]作曲 : 暗杠
[00:15.00]作词 : 竹君
[00:22.93]听说白雪公主在逃跑
[00:26.43] 小红帽在担心大灰狼
[00:29.83]听说疯帽喜欢爱丽丝 
[00:33.17]丑小鸭会变成白天鹅
[00:36.34]听说彼得潘总长不大
[00:40.23]杰克他有竖琴和魔法
[00:43.56]听说森林里有糖果屋
[00:46.82]灰姑娘丢了心爱的玻璃鞋
[00:50.39]只有睿智的河水知道
[00:53.68]白雪是因为贪玩跑出了城堡
[00:57.31]小红帽有件抑制自己
[01:00.73]变成狼的大红袍
[01:03.80]总有一条蜿蜒在童话镇里七彩的河
[01:11.00]沾染魔法的乖张气息
[01:14.42]却又在爱里曲折
[01:17.76]川流不息扬起水
[01:20.87]又卷入一帘时光入水
[01:24.68]让全部很久很久以前
[01:28.12]都走到幸福结局的时刻
[01:33.18]music....
[01:47.00]听说睡美人被埋藏
[01:50.44]小人鱼在眺望金殿堂
[01:53.79]听说阿波罗变成金乌
[01:57.12]草原有奔跑的剑齿虎
[02:00.73]听说匹诺曹总说着谎
[02:04.16]侏儒怪拥有宝石满箱
[02:07.57]听说悬崖有颗长生树
[02:10.80]红鞋子不知疲倦地在跳舞
[02:14.43]只有睿智的河水知道
[02:17.84]睡美人逃避了生活的煎熬
[02:21.14]小人鱼把阳光抹成眼影
[02:24.58]投进泡沫的怀抱
[02:27.77]总有一条蜿蜒在童话镇里七彩的河
[02:35.06]沾染魔法的乖张气息
[02:38.43]却又在爱里曲折
[02:41.82]川流不息扬起水花
[02:44.87]又卷入一帘时光入水
[02:48.69]让全部很久很久以前
[02:52.00]都走到幸福结局的时刻
[02:55.46]总有一条蜿蜒在童话镇里梦幻的河
[03:02.47]分隔了理想分隔现实
[03:05.82]又在前方的山口汇合
[03:09.22]川流不息扬起水花
[03:12.36]又卷入一帘时光入水
[03:16.23]让全部很久很久以前
[03:19.38]都走到幸福结局的时刻
[03:22.72]又陌生
[03:24.52]啊~~啊~~啊~~啊~~
</textarea>
</div>

	<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
	<script type="text/javascript">
		
		$(function(){
			
		//创建MP3播放器
			var audioDom=document.createElement("audio");
		//设置播放器地址
			audioDom.src="mp3/童话镇.mp3";
		//获取textarea中的歌词
			var lrc = $("#lrc").val();
		//把时间和歌词分离开	[00:22.93]听说白雪公主在逃跑
			var lrcArray = lrc.split("[");
			/*打印在控制台
			console.log(lrcArray);
			*/
			
			var html = "";
			
			for(var i = 0;i < lrcArray.length; i++){
			//第二次切割
				var arr=lrcArray[i].split("]");
			//取到歌词
				var lrcMsg = arr[1];
			//取到时间	[00:22.93]
				var timer = arr[0].split(".");
			//拿到时间的分钟和秒
				var stime = timer[0].split(":");
			//转化成秒
				var ms = stime[0] * 60 + stime[1] * 1 - 1;



				if(lrcMsg){
					html += "<div class='lrc' id='"+ms+"'>"+lrcMsg+"</div>";
				}
			}
			//将解析到的歌词存储在html中
				$(".m-con").html(html);
				
				var history = 0;
				num = 0;
				audioDom.addEventListener("timeupdate",function(){
					//获取当前时间;
					var time=this.currentTime;
					//通过时间来驱动歌词
					var s = parseInt(time);
					for(var i = 0;i < s; i++){
						$("#"+i).addClass("sel").siblings().removeClass("sel");
						// $(".m-con").animate({scrollTop: $("#"+i).offset().top}, 500);
					}
					// console.log($("#"+i));
					console.log(history +"   "+ s);
					if($("#"+i).length == 1 && history != s) {
						// $(".m-con").animate({scrollTop: $("#"+i).offset().top}, 500);
						document.getElementById(i).scrollIntoView({block: "center", behavior: "smooth"},false);	
						history = s;
					}

				});





			//点击按钮
			$(".m-btn").click(function(){
				//alert("你好！");
				
				if(audioDom.paused){
					audioDom.play();
				}else{
					audioDom.pause();
				}


				$(this).toggleClass("myRotate");
			});
		});

	</script>


</body>
</html>